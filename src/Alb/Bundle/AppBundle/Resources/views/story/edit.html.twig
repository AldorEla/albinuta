{% extends 'frontend.html.twig' %}

{% block body %}
    <div class="hero-banner js-hero-banner-container">
        <img src="{{ story_upload_destination }}{{ story.image }}" alt="{{ story.title }}" width="100%" />
    </div>

    <div class="container edit-page inner-page">
        <h1>{{ story.title }}<br /><span class="form-subtitle text-uppercase">Story edit</span></h1>

        {% form_theme edit_form 'form/fields.html.twig' %}

        {{ form_start(edit_form) }}
            <div class="sticked-actions">
                <div class="position-relative">
                    {# <input title="Minimize Tools panel" type="checkbox">
                    <span class="minimize"><i class="fa fa-window-minimize" aria-hidden="true"></i></span> #}
                    <ul>
                        <li>
                            <a title="Back to stories list" class="btn btn-secondary" href="{{ path('story_index') }}"><i class="fa fa-mail-reply"></i></a>
                        </li>
                        <li>
                             <a title="Read the story" class="btn btn-secondary" href="{{ path('story_show', { 'id': story.id }) }}"><i class="fa fa-eye"></i></a>
                        </li>
                        <li>
                            <button class="btn btn-success" title="Update story" type="submit"><i class="fa fa-floppy-o"></i></button>
                        </li>
                    </ul>
                </div>
            </div>

            <div id="accordion" role="tablist" aria-multiselectable="true">
                <div class="row padding-bottom-20">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header" role="tab" id="headingOne">
                                <h5 class="mb-0">
                                    <strong class="text-uppercase text-14">Media</strong>
                                </h5>
                            </div>
                            <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
                                <div class="card-block">
                                    <div class="form-group">
                                        {{ form_label(edit_form.video) }}
                                        {{ form_widget(edit_form.video) }}
                                        {{ form_errors(edit_form.video) }}

                                        {# Include video #}
                                        {% if edit_form.video %}
                                            <div class="video-box position-relative margin-bottom-15">
                                                <div class="field-icon">
                                                    <i class="fa fa-file-video-o fa-lg" aria-hidden="true"></i>
                                                </div>
                                                <iframe width="100%" height="100%" class="iframe-video" src="{{ story.video }}" frameborder="0" allowfullscreen></iframe>
                                            </div>
                                        {% endif %}
                                    </div>
                                    {# Include image #}
                                    {{ form_label(edit_form.imageFile) }}
                                    {{ form_widget(edit_form.image) }}
                                    {% if edit_form.imageFile %}
                                        <div class="form-group">
                                            <div class="video-box position-relative">
                                                <div class="field-icon">
                                                    <i class="fa fa-file-image-o fa-lg" aria-hidden="true"></i>
                                                </div>
                                                <img src="{{ story_upload_destination }}{{ story.image }}" alt="{{ story.title }}" width="100%" />
                                            </div>
                                            <div class="file-input" data-browse-text="Browse">
                                                {{ form_widget(edit_form.imageFile) }}
                                                {{ form_errors(edit_form.imageFile) }}
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header" role="tab" id="headingTwo">
                                <h5 class="mb-0">
                                    <strong class="text-uppercase text-14">Story Details</strong>
                                </h5>
                            </div>
                            <div id="collapseTwo" class="collapse show" role="tabpanel" aria-labelledby="headingTwo">
                                <div class="card-block">
                                    <div class="form-group">
                                        {{ form_label(edit_form.title) }}
                                        {{ form_widget(edit_form.title) }}
                                        {{ form_errors(edit_form.title) }}
                                    </div>
                                    <div class="form-group">
                                        {{ form_errors(edit_form.content) }}
                                        {# Include content with Rich Text Editor #}
                                        {{ form_widget( edit_form.content ) }}
                                        {{ tinymce_init() }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header" role="tab" id="headingThree">
                                <h5 class="mb-0">
                                    <strong class="text-uppercase text-14">Filters</strong>
                                </h5>
                            </div>
                            <div id="collapseThree" class="collapse show" role="tabpanel" aria-labelledby="headingThree">
                                <div class="row no-margin">
                                    <div class="card-block col-md-6 col-lg-3">
                                        <div class="form-group">
                                            {{ form_label(edit_form.language) }}
                                            {{ form_widget(edit_form.language) }}
                                            {{ form_errors(edit_form.language) }}
                                        </div>
                                    </div>
                                    <div class="card-block col-md-6 col-lg-3">
                                        <div class="form-group">
                                            {{ form_label(edit_form.type) }}
                                            {{ form_widget(edit_form.type) }}
                                            {{ form_errors(edit_form.type) }}
                                        </div>
                                    </div>
                                    <div class="card-block col-md-6 col-lg-3">
                                        <div class="form-group">
                                            {{ form_label(edit_form.genre) }}
                                            {{ form_widget(edit_form.genre) }}
                                            {{ form_errors(edit_form.genre) }}
                                        </div>
                                    </div>
                                    <div class="card-block col-md-6 col-lg-3">
                                        <div class="form-group">
                                            {{ form_label(edit_form.recommended_age) }}
                                            {{ form_widget(edit_form.recommended_age) }}
                                            {{ form_errors(edit_form.recommended_age) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row actions-row">
                <div class="col">
                    <ul>
                        <li>
                            <a class="btn btn-secondary" href="{{ path('story_index') }}">Back to the list</a>
                            <a class="btn btn-secondary" href="{{ path('story_show', { 'id': story.id }) }}">Read</a>
                            <input class="btn btn-success" type="submit" value="Update" />
                        </li>
                    </ul>
                </div>
            </div>
        {{ form_end(edit_form) }}
        <div class="row actions-row">
            <div class="col">
                {{ form_start(delete_form) }}
                    <button class="btn btn-danger" type="submit"><i class="fa fa-trash fa-lg"></i> Delete</button>
                {{ form_end(delete_form) }}
            </div>
        </div>
    </div> <!-- /container -->
{% endblock %}
